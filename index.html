<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Class Resources</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
</head>
<body>

<header>
  <div class="container">
    <h1>Class Resources</h1>
    <p>BCA - 6th Semester</p>
  </div>
</header>

<main class="container" id="main-content">
</main>

<footer>
  <p>Hosted on GitHub Pages</p>
</footer>

<script>
  const CONFIG = {
    username: 'YOUR_GITHUB_USERNAME',
    repo: 'YOUR_REPO_NAME',
    folders: [
      { path: 'syllabus', title: 'üìÇ Syllabus' },
      { path: 'notes', title: 'üìù Notes' },
      { path: 'assignments', title: 'üì¶ Assignments & Misc' }
    ]
  };

  async function init() {
    const main = document.getElementById('main-content');

    for (const folder of CONFIG.folders) {
      const section = document.createElement('section');
      section.className = 'category';

      const title = document.createElement('h2');
      title.textContent = folder.title;
      section.appendChild(title);

      const ul = document.createElement('ul');
      ul.className = 'file-list';
      ul.innerHTML = '<li>Loading...</li>';
      section.appendChild(ul);

      main.appendChild(section);

      try {
        const response = await fetch(`https://api.github.com/repos/${CONFIG.username}/${CONFIG.repo}/contents/${folder.path}`);

        if (!response.ok) throw new Error('Folder not found');

        const data = await response.json();
        ul.innerHTML = '';

        data.forEach(file => {
          if (file.type === 'file') {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = file.download_url;
            a.textContent = file.name;
            a.target = '_blank';
            li.appendChild(a);
            ul.appendChild(li);
          }
        });

        if (data.length === 0) {
          ul.innerHTML = '<li style="color: #6b7280; font-style: italic;">No files yet</li>';
        }

      } catch (error) {
        ul.innerHTML = `<li style="color: red;">Error loading ${folder.path}. Check repo name.</li>`;
        console.error(error);
      }
    }
  }

  init();
</script>
</body>
</html>